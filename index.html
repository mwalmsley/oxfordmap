<!DOCTYPE html>

<html>
 
<head>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
 	<title>.Astronomy 8 | Oxford Map</title>
</head>

<body>
	<div id="map"></div>
	<style>
    		body {
    			padding: 0;
			margin: 0;
		}
		html, body, #map {
			 height: 100%;
		}
    		
	</style>

	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script>
		var mymap = L.map('map')
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>, Info © <a href="https://github.com/rjsmethurst">R Smethurst</a>',
		maxZoom: 18,
    		id: 'mapbox.streets',
    		accessToken: 'pk.eyJ1IjoicmpzbWV0aHVyc3QiLCJhIjoiY2lnbG56YnplMDE0M3RjbTNkems5cWI0aCJ9.ekUxiCzi_8dwkUinlpr1YQ'
}).addTo(mymap);
		
		mymap.locate({setView: true, maxZoom: 16});
		
		function onLocationFound(e) {
    			L.marker(e.latlng).addTo(mymap)
    				.bindPopup('You are here')
    			if (e.latlng.lat > 51.768 || e.latlng.lat < 51.74247 || e.latlng.lng > -1.2336 || e.latlng.lng < -1.27793) {
    				mymap.setView([51.7505017,-1.2589], 15)	
    			} else {
    				mymap.setView(e.latlng, 15)
    			}
		}
		mymap.on('locationfound', onLocationFound);
		
		function onLocationError(e) {
    			mymap.setView([51.7505017,-1.2589], 15)
		}
		mymap.on('locationerror', onLocationError);

		

		var homeIcon = L.icon({
    			iconUrl: 'home.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});
    		var beerIcon = L.icon({
    			iconUrl: 'beer.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});
    		var foodIcon = L.icon({
    			iconUrl: 'food.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});
    			
    		var coffeeIcon = L.icon({
    			iconUrl: 'coffee.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});
    			
    		var busIcon = L.icon({
    			iconUrl: 'bus.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});
    			
    		var workIcon = L.icon({
    			iconUrl: 'laptop.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});
    		var moneyIcon = L.icon({
    			iconUrl: 'gbp.png',

			iconSize:     [29, 39], // size of the icon
    			iconAnchor:   [15, 38], // point of the icon which will correspond to marker's location
    			popupAnchor:  [-3, -40] // point from which the popup should open relative to the iconAnchor
    			});

		marker = L.marker([51.75024, -1.25782], {icon: homeIcon}).addTo(mymap);
		marker.bindPopup('<b>Pembroke College</b><br>Conference venue and accomodation');
		
		marker = L.marker([51.75484, -1.25423], {icon: workIcon}).addTo(mymap);
		marker.bindPopup('<b>Oxford Martin School</b><br>Day 0 Venue');
		
		marker = L.marker([51.75511, -1.25432], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Kings Arms</b><br>Monday night pub');
		
		marker = L.marker([51.74668, -1.25607], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Head of the River</b><br>Sunday night pub by the river');
		
		marker = L.marker([51.75127, -1.25737], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>St. Aldates Tavern</b><br>Tuesday night pub - head upstairs to the Blue Room');
		
		marker = L.marker([51.75077, -1.25935], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Royal Blenheim</b><br>Pembroke College official pub with a spread of real ale. Always got sport on the screens but never football. Try the pub quiz on Wednesday at 20:30 - one answer is always Cheese!' );
		
		marker = L.marker([51.75097, -1.25721], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>By the post office' );
		
		marker = L.marker([51.75097, -1.25721], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>By the post office');
		
		marker = L.marker([51.75209, -1.25784], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>Barclays on one side of the street - Lloyds TSB on the other.');
		
		marker = L.marker([51.75414, -1.25658], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>NatWest');
		
		marker = L.marker([51.75217, -1.25591], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>NatWest');
		
		marker = L.marker([51.75835, -1.26363], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>Inside the Co-Operative - will close in the evening');
		
		marker = L.marker([51.75467, -1.25911], {icon: moneyIcon}).addTo(mymap);
		marker.bindPopup('<b>ATM</b><br>Outside Tesco');
		
		marker = L.marker([51.74849, -1.25747], {icon: busIcon}).addTo(mymap);
		marker.bindPopup('<b>Speedwell Street Bus Stop</b><br>Bus Stop for travel towards London');
		
		marker = L.marker([51.75053, -1.25688], {icon: busIcon}).addTo(mymap);
		marker.bindPopup('<b>St. Aldates Bus Stop</b><br>Bus Stop for travel from London');
		
		marker = L.marker([51.75339, -1.26976], {icon: busIcon}).addTo(mymap);
		marker.bindPopup('<b>Oxford Train Station</b><br>15 minute walk from Pembroke College');
		
		marker = L.marker([51.75273, -1.26559], {icon: foodIcon}).addTo(mymap);
		marker.bindPopup('<b>Sojo</b><br>Amazing Chinese food');
		
		marker = L.marker([51.76092, -1.26739], {icon: foodIcon}).addTo(mymap);
		marker.bindPopup('<b>Zheng</b><br>Amazing Chinese food with added Malaysian');
		
		marker = L.marker([51.75711, -1.26619], {icon: foodIcon}).addTo(mymap);
		marker.bindPopup('<b>Al Shaami</b><br>Really authentic Lebanese place');
		
		marker = L.marker([51.75737, -1.25947], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Lamb & Flag</b><br>Great pub - the Oxford Astronomer local. Food only available at lunch time. All profits fund graduate students');
		
		marker = L.marker([51.7627, -1.26654], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Gardeners Arms</b><br>Vegetarian food pub. Burgers you would never guess were meat free. Beer Garden.');
		
		marker = L.marker([51.7647, -1.26173], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Rose and Crown</b><br>Best ale pub in the city with outside space. Worth the trek.');
		
		marker = L.marker([51.75444, -1.26071], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The White Rabbit</b><br>Cosy pub with incredible stone baked pizza');
		
		marker = L.marker([51.75825, -1.26392], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>Raouls</b><br>One of the top 50 cocktail bars in the world according to The Times. Voted most likely place to find Chris Lintott in Oxford.');
		
		marker = L.marker([51.74952, -1.24273], {icon: foodIcon}).addTo(mymap);
		marker.bindPopup('<b>The Kazbar</b><br>Authentic and extremely delicious Mezze and Tapas. Great mediterranean vibe.');
		
		marker = L.marker([51.75155, -1.25575], {icon: beerIcon}).addTo(mymap);
		marker.bindPopup('<b>The Bear</b><br>Oldest and smallest pub in Oxford. Good pub grub if you can find a table amongst the ties.');
		
		marker = L.marker([51.74859, -1.23989], {icon: foodIcon}).addTo(mymap);
		marker.bindPopup('<b>Atomic Burger</b><br>Taking burgers to epic proportions.');
		
		marker = L.marker([51.75053, -1.25701], {icon: foodIcon}).addTo(mymap);
		marker.bindPopup('<b>G&Ds </b><br>Ice Cream and Bagels.');
		
		marker = L.marker([51.75295, -1.25611], {icon: coffeeIcon}).addTo(mymap);
		marker.bindPopup('<b>The Missing Bean </b><br>Coffee house with 20% discount for .Astronomy participants.');
		
		marker = L.marker([51.75326, -1.26042], {icon: coffeeIcon}).addTo(mymap);
		marker.bindPopup('<b>Zappis</b><br>Bike cafe/bar. Student vibe. Try the banana bread.');
		
		var popup = L.popup();

		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(mymap);
		}

		mymap.on('click', onMapClick);
		
	</script>

</body>

</html>
